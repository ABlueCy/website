{{- $path    := .File.Path }}
{{- $editUrl := printf "https://github.com/vitessio/website/edit/master/content/%s" $path }}
{{- $docsSections   := where .Site.Sections "Section" "docs" }}
<header class="docs-header">
  <p class="title is-size-1 is-size-2-mobile{{ if .Params.description }} is-spaced{{ end }}">
    {{ .Title }}
  </p>

  {{- with .Params.description }}
  <p class="subtitle is-size-3 is-size-4-mobile">
    {{ . | markdownify }}
  </p>
  {{- end }}

  <div class="buttons">
    <a class="button is-dark" href="{{ $editUrl }}">
      <span class="icon">
        <i class="fab fa-github"></i>
      </span>
      <span>
        Edit
      </span>
    </a>

    <br />
    <br />

    <div class="dropdown is-hoverable is-hidden-desktop">
      <div class="dropdown-trigger">
        <button class="button is-primary" aria-haspopup="true" aria-controls="dropdown-menu">
          <span>
            Documentation
          </span>
          <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
        </button>
      </div>
      <div class="dropdown-menu" id="dropdown-menu" role="menu">
        <div class="dropdown-content">
          {{- range $docsSections }}
          <a class="dropdown-item has-text-weight-bold" href="{{ .URL }}">
            {{ .Name }}
          </a>

          <hr class="dropdown-divider" />

          {{- range $idx, $section := .Sections }}
          {{- $isLastSection := eq (len $docsSections) $idx }}
          <a class="dropdown-item has-text-weight-bold" href="{{ $section.URL }}">
            {{ $section.Name }}
          </a>

          {{- range .Pages }}
          <a class="dropdown-item" href="{{ .URL }}">
            {{ .Title }}
          </a>
          {{- end }}

          {{- if not $isLastSection }}
          <hr class="dropdown-divider" />
          {{- end }}
          {{- end }}
          {{- end }}
        </div>
      </div>
    </div>
  </div>
</header>
